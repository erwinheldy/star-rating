const starRating=(element,config={})=>{if(!element)return!1;element.previousElementSibling&&element.previousElementSibling.classList.contains("star-rating")&&element.previousElementSibling.remove();const stars=5;element.setAttribute("hidden",!0),element.value=element.value>5?5:element.value;const size=element.dataset.starRatingSize||config.size||1.5,width=5*size,initValue=20*element.value;element.insertAdjacentHTML("beforebegin",`<div class="star-rating"><div class="star-rating-value" style="width: ${initValue}%" data-star-rating-width="${initValue}%"></div></div>`);const container=element.previousSibling,children=container.getElementsByClassName("star-rating-value")[0];if(container.style.width=width+"em",container.style.height=size+"em",container.style.backgroundSize=size+"em",children.style.backgroundSize=size+"em",element.readOnly&&(container.style.cursor="auto"),!1===element.readOnly){const getPercent=e=>{const rect=e.target.getBoundingClientRect();let clientX=e.clientX;void 0===clientX&&(clientX=e.touches.length?e.touches[0].clientX:e.changedTouches[0].clientX);const x=clientX-rect.left,percent=x/container.offsetWidth*100;return 10*Math.ceil(Math.ceil(percent)/10)+"%"},setValue=()=>{let newValue=children.dataset.starRatingWidth.replace("%","")/20;newValue=newValue<0?0:newValue>5?5:newValue,element.value!=newValue&&(element.value=newValue,element.setAttribute("value",newValue),element.dispatchEvent(new Event("change")))};container.addEventListener("mousemove",e=>children.style.width=getPercent(e)),container.addEventListener("touchmove",e=>children.style.width=getPercent(e)),container.addEventListener("mouseleave",()=>children.style.width=children.dataset.starRatingWidth),container.addEventListener("click",e=>{children.dataset.starRatingWidth=getPercent(e),setValue()}),container.addEventListener("touchend",e=>{children.dataset.starRatingWidth=getPercent(e),setValue()})}};